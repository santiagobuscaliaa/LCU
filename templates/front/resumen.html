{% extends "a.html" %}

{% block title %}Resumen de Compra - Cine LCU{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/front/resumen.css') }}">
{% endblock %}

{% block content %}
<main class="contenedor">
    <h1>Resumen de compra</h1>
    
    <table>
        <thead>
            <tr>
                <th>Película</th>
                <th>Función</th>
                <th>Butacas</th>
                <th>Cant. entradas</th>
                <th>Candy</th>
                <th>TOTAL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    {% if param.pelicula %}
                        {{ param.pelicula.titulo }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if param.funcion %}
                        {{ param.funcion.dia }} - {{ param.funcion.horario }}<br>
                        {{ param.funcion.formato }} - Sala {{ param.funcion.sala }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if param.butacas %}
                        {% for butaca in param.butacas %}
                            {{ butaca }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ param.cantidad_entradas or 0 }}</td>
                <td>
                    {% if param.candy %}
                        {% for item in param.candy %}
                            {{ item.tipo }} {{ item.tamano }}<br>
                        {% endfor %}
                    {% else %}
                        Sin candy
                    {% endif %}
                </td>
                <td>${{ param.total or 0 }}</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th colspan="5">TOTAL A PAGAR</th>
                <th>${{ param.total or 0 }}</th>
            </tr>
        </tfoot>
    </table>
    
    <form action="{{ url_for('comprar') }}" method="POST">
        <button type="submit" class="btn" id="comprarBtn">Comprar</button>
    </form>
    
    <div style="margin-top: 20px;">
        <a href="{{ url_for('candy') }}" class="link">← Volver a Candy</a>
    </div>
</main>

<div id="mensaje-exito" class="mensaje-exito"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/front/resumen.js') }}" defer></script>
{% endblock %}
